<!DOCTYPE html>
<html lang="en">
<head>
    <include file="Public:header" />

</head>
<style>
    .path_map {
        margin: 20px 0;
    }

    .pd_image {
        height: 350px;
        width: 350px;
    }

    .pd_price {
        font-weight: bold;
        color: rgb(255, 69, 69);
    }

    .pd_info {
        margin: 30px 0;
    }

    .pd_info p{
        margin: 20px 0 10px;
        font-size: 18px;
    }

    .desc_images .relation_pd {
        max-width: 700px;
    }

    .relation_pd div {
        margin: 20px 0;
        text-align: center;
    }

</style>

<body>
<div class="container" style="max-width: 1050px;">
    <include file="Public:main_nav" />

    <div class="row row-offcanvas row-offcanvas-right">
        <div class="col-xs-12 col-sm-10">
            <label class="path_map"></label>
            <div class="row">
                <div class="col-xs-5 col-lg-6">
                    <div class="col-xs-6 col-lg-4" id="pd_image">
                    </div>
                </div>
                <div class="pd_info col-xs-7 col-lg-6 ">

                </div>
            </div>
            <div class="row desc_images" >
            </div>
            <div class="row relation_pd" >
            </div>
        </div>

    <include file="Public:righter"/>
    </div><!--/row-->

    <include file="Public:footer" />
</div><!--/.container-->


<include file="Public:js_basic" />


<script>
    $(function(){
        pathMap();
        getProductInfo();
        getProductDesc();
        getRelationProduct();
    })


    function getProductInfo(){
        var _id = getUrlParameter('id');
        $.ajax({
            type: "post",
            url: "__URL__/ajaxProductBaseInfo",
            data: {id:_id},
            success: function (rtn){
                if(rtn.status){
                    var list = rtn['list'];

                    var img = '<img src="'+ list['image'] +'" class="pd_image"/>';
                    $("#pd_image").empty().append(img);

                    var info = '';
                    info+= '<h2>'+ list['name'] + list['size'] +'</h2>';
                    info+= '<p>'+ list['code'] + '</p>';
                    info+= '<p class="pd_price">'+ list['price'] + '</p>';
                    info+= '<p>'+ list['manufacturer'] + '</p>';
                    info+= '<p>'+ list['origin'] + '</p>';
                    $(".pd_info").empty().append(info);

                }else{
                    //alert(rtn.info);
                }
            }
        });
    }

    function getProductDesc(){
        var _id = getUrlParameter('id');
        $.ajax({
            type: "post",
            url: "__URL__/ajaxProductDescInfo",
            data: {id:_id},
            success: function (rtn){
                if(rtn.status){
                    var list = rtn['list'];

                    var html = '<h2 class="text-center">产品详情</h2><hr/>';
                    $.each(list,function(index,value){
                        html += '<dd><img src="'+ value['image'] +'" /></dd>';
                    })

                    $(".desc_images").empty().append(html);
                }
            }
        });
    }

    function getRelationProduct(){
        var _id = getUrlParameter('id');
        $.ajax({
            type: "post",
            url: "__URL__/ajaxRelationProduct",
            data: {id:_id},
            success: function (rtn){
                if(rtn.status){
                    var list = rtn['list'];

                    var html = '<h2 class="text-center">' + rtn['title'] + '</h2><hr/>';
                    $.each(list,function(index,value){
                        html += '<div class="col-xs-6 col-lg-4"><a href="' + value['detail_url'] +'">';
                        html += '<img class="list_pic_m" src="'+ value['image_url'] +'" /></a> ';
                        html += '<p>'+ value['name'] + '</p>';
                        html += '<p>'+ value['code'] + '</p>';
                        html += '<p>' +value['price'] + '</p></div>';
                    })

                    $(".relation_pd").empty().append(html);
                }
            }
        });
        return;
    }

    function pathMap(){
        $.ajax({
            type: "post",
            url: "__URL__/ajaxPathMap",
            success: function (rtn){
                if(rtn.status){
                    var list = rtn['list'];

                    $(".path_map").text(list);
                }
            }
        });
        return;
    }


</script>
</body>
</html>
